<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smoothed Radar Chart from JSON</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; }
    .axisLabel { font-size: 12px; fill: #333; text-anchor: middle; }
    .line { fill-opacity: 0.1; stroke-width: 2px; }
    .circle { fill-opacity: 0.7; }
  </style>
</head>
<body>
<svg width="700" height="700"></svg>
<script>
const url = "https://raw.githubusercontent.com/bengoodmanhl/bengoodmanhl.github.io/refs/heads/main/RadarJSON.json"; // ðŸ” Replace with your actual JSON URL
const width = 700, height = 700;
const radius = Math.min(width, height) / 2 - 100;
const svg = d3.select("svg")
  .attr("viewBox", `0 0 ${width} ${height}`)
  .append("g")
  .attr("transform", `translate(${width / 2}, ${height / 2})`);

d3.json(url).then(data => {
  const dimensions = Object.keys(data[0]).filter(d => d !== "name");
  const angleSlice = (2 * Math.PI) / dimensions.length;
  const color = d3.scaleOrdinal(d3.schemeCategory10);

  // Normalize data
  const extentByDimension = {};
  dimensions.forEach(d => {
    extentByDimension[d] = d3.extent(data, obj => obj[d]);
  });

  function getScaledRadius(dimension, value) {
    return d3.scaleLinear()
      .domain(extentByDimension[dimension])
      .range([0, radius])(value);
  }

  // Draw grid/web
  for (let level = 0; level <= 5; level++) {
    const r = radius * (level / 5);
    const points = dimensions.map((_, i) => {
      const angle = angleSlice * i - Math.PI / 2;
      return [Math.cos(angle) * r, Math.sin(angle) * r];
    });
    svg.append("polygon")
      .attr("points", points.map(d => d.join(",")).join(" "))
      .attr("fill", "none")
      .attr("stroke", "#ccc");
  }

  // Axis labels
  dimensions.forEach((dim, i) => {
    const angle = angleSlice * i - Math.PI / 2;
    const x = Math.cos(angle) * (radius + 20);
    const y = Math.sin(angle) * (radius + 20);
    svg.append("text")
      .attr("class", "axisLabel")
      .attr("x", x)
      .attr("y", y)
      .text(dim);
  });

  // Smoothed radial line generator
  const radarLine = d3.lineRadial()
    .radius(d => d.radius)
    .angle((d, i) => i * angleSlice)
    .curve(d3.curveCardinalClosed);

  data.forEach(d => {
    const points = dimensions.map((dim, i) => {
      return {
        angle: i * angleSlice,
        radius: getScaledRadius(dim, d[dim])
      };
    });

    // Draw filled path
    svg.append("path")
      .attr("d", radarLine(points))
      .attr("stroke", color(d.name))
      .attr("fill", color(d.name))
      .attr("fill-opacity", 0.1)
      .attr("stroke-width", 2)
      .attr("class", "line");

    // Draw points
    points.forEach(p => {
      const x = Math.cos(p.angle - Math.PI / 2) * p.radius;
      const y = Math.sin(p.angle - Math.PI / 2) * p.radius;
      svg.append("circle")
        .attr("cx", x)
        .attr("cy", y)
        .attr("r", 3)
        .attr("fill", color(d.name))
        .attr("class", "circle");
    });
  });
});
</script>
</body>
</html>
